{"version":3,"sources":["webpack:///./src/app/pages/firebasekyc-page/firebasekyc-page.html","webpack:///./src/app/pages/firebasekyc-page/firebasekyc-page.module.ts","webpack:///./src/app/pages/firebasekyc-page/firebasekyc-page.ts","webpack:///./src/app/pages/firebasekyc-page/kyc.service.ts"],"names":[],"mappings":"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","file":"pages-firebasekyc-page-firebasekyc-page-module.js","sourcesContent":["module.exports = \"<ion-header>\\n <ion-toolbar >\\n   <ion-buttons slot=\\\"start\\\">\\n      <ion-menu-button></ion-menu-button>\\n    </ion-buttons>\\n\\n        <ion-title small>\\n            <sup>  KYC document upload </sup>\\n        </ion-title>\\n\\n    </ion-toolbar>\\n\\n</ion-header>\\n\\n<ion-content>\\n  <ion-list>\\n<ion-card class=\\\"ion-text-center\\\" *ngIf=\\\" kycdata != null && kycstatus.kycdone == 'true'\\\">\\n    <ion-item>\\n <ion-label> \\n KYC is done\\n </ion-label> \\n    </ion-item>\\n</ion-card >\\n \\n<ion-card class=\\\"ion-text-center\\\" *ngIf=\\\" loggedinuser == null \\\">\\n    <ion-item>\\n <ion-label> \\n User not loggedin\\n </ion-label> \\n    </ion-item>\\n</ion-card >\\n\\n  </ion-list>\\n  <ion-list >\\n<ion-card class=\\\"ion-text-center\\\">\\n\\n <ion-grid class=\\\"directbackground\\\" >\\n           <ion-row justify-content-center align-items-center >\\n            <ion-col >\\n\\n    <ion-item>\\n       <ion-label>Name    : </ion-label>\\n      <ion-input [(ngModel)]=\\\"kycdata.name\\\" type=\\\"text\\\" placeholder=\\\"Name\\\" ></ion-input>\\n    </ion-item>\\n    <ion-item>\\n       <ion-label>Email    : </ion-label>\\n      <ion-input [(ngModel)]=\\\"kycdata.kycemail\\\" type=\\\"email\\\" placeholder=\\\"Email\\\" ></ion-input>\\n    </ion-item>\\n      <ion-item>\\n       <ion-label>Phone :</ion-label>\\n        <ion-input [(ngModel)]=\\\"kycdata.kycphone\\\" type=\\\"phone\\\" placeholder=\\\"Phone\\\" ></ion-input>\\n      </ion-item>\\n      <ion-item>\\n       <ion-label>Address:</ion-label>\\n        <ion-textarea rows=\\\"8\\\" [(ngModel)]=\\\"kycdata.address\\\"   class=\\\"ion-text-wrap\\\"  type=\\\"text\\\" placeholder=\\\"Address\\\" ></ion-textarea>\\n      </ion-item>\\n <label class=\\\"error-message\\\">{{errorMessage}}</label>\\n      <ion-item>\\n       <ion-label>Send kyc documents to support@dashreverse.in  \\n          <p> Upon verifying, account will be marked kyc verified </p>\\n      </ion-label>\\n      </ion-item>\\n </ion-col>\\n        </ion-row>\\n        </ion-grid>\\n</ion-card>\\n\\n<ion-card class=\\\"ion-text-center\\\">\\n <ion-grid class=\\\"directbackground\\\" >\\n           <!--ion-row justify-content-center align-items-center *ngIf=\\\"kycstatus != null && kycstatus.kycdone == 'false' \\\">\\n            <ion-col >\\n    <ion-item>\\n       <ion-label>KYC document upload    : </ion-label>\\n    </ion-item>\\n<div *ngIf=\\\"uploaddone != 100\\\">\\n  <input type=\\\"file\\\" (change)=\\\"uploadFile($event)\\\" />\\n    <div>{{ uploadPercent | async }}</div>\\n    <a [href]=\\\"downloadURL | async\\\">{{ downloadURL | async }}</a>\\n</div>\\n<div *ngIf=\\\"uploaddone == 100\\\">\\n Uploaded successfully \\n</div>\\n </ion-col>\\n        </ion-row -->\\n        <ion-row *ngIf=\\\"kycdata != null && kycstatus.kycdone == 'false' \\\">\\n    <ion-item>\\n       <ion-label>Country    : </ion-label>\\n      <ion-input [(ngModel)]=\\\"kycdata.country\\\" type=\\\"text\\\" placeholder=\\\"Enter country \\\" ></ion-input>\\n    </ion-item>\\n    <ion-item>\\n       <ion-label>Document type    : </ion-label>\\n    <ion-select #select1 [(ngModel)]=\\\"kycdata.kycdoctype\\\">\\n      <ion-select-option  value=\\\"Driving License\\\">Driving License</ion-select-option>\\n      <ion-select-option  value=\\\"Passport \\\">Passport</ion-select-option>\\n    </ion-select>\\n   </ion-item>\\n\\n      <ion-item>\\n       <ion-label>Document number :</ion-label>\\n        <ion-input [(ngModel)]=\\\"kycdata.kycdocnumber\\\" type=\\\"text\\\" placeholder=\\\"Document number\\\" ></ion-input>\\n      </ion-item>\\n        </ion-row>\\n        </ion-grid>\\n      <ion-item>\\n    <ion-button  [disabled]=\\\"kycstatus.kycdone == 'submitted'\\\" [disabled]=\\\"loggedinuser == null\\\" item-right small class=\\\"colorbutton\\\" (click)=\\\"kycsubmit()\\\"   >Submit kyc </ion-button>\\n      </ion-item>\\n</ion-card>\\n\\n  </ion-list>\\n\\n</ion-content>\\n\"","import { CUSTOM_ELEMENTS_SCHEMA, NgModule } from '@angular/core';\nimport { FirebaseKycPage } from './firebasekyc-page';\nimport { RouterModule } from '@angular/router';\nimport { FormsModule } from '@angular/forms';\nimport { IonicModule } from '@ionic/angular';\nimport { CommonModule } from '@angular/common';\n\n\n\n\n@NgModule({\n  declarations: [\n    FirebaseKycPage,\n  ],\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n     RouterModule.forChild([\n      {\n        path: '',\n        component: FirebaseKycPage\n      }\n    ])\n\n  ],\n  schemas: [CUSTOM_ELEMENTS_SCHEMA]\n  \n})\nexport class FirebaseKycPageModule {}\n","import { Component } from '@angular/core';\nimport { NavController,  LoadingController  } from '@ionic/angular';\nimport { AlertController } from '@ionic/angular';\n\nimport { finalize } from 'rxjs/operators';\nimport { Observable, of, throwError } from 'rxjs';\nimport { Storage } from '@ionic/storage';\n\n\n\n\nimport { Events } from '@ionic/angular';\nimport { KycService } from './kyc.service';\nimport { kycData } from '../models/kycdata.model';\nimport { kycStatus } from '../models/kycstatus.model';\n\nimport {environment} from '../config/environment';\nimport { Logger } from '../../providers/logger/logger';\nimport { TermsuserService } from '../termspage/terms-user.service';\n\n\n\n@Component({\n  selector: 'firebasekyc-page',\n  templateUrl: 'firebasekyc-page.html'\n})\n\n//https://blog.angular.io/file-uploads-come-to-angularfire-6842352b3b47\n// https://github.com/angular/angularfire2/blob/master/docs/storage/storage.md\n\nexport class FirebaseKycPage {\n  ref : any;\n  task : any;\n  uploadPercent: any;\n  errorMessage = '';\n  uploaddone = 0;\n  downloadURL: any;\n  uploadfile : any;\n\n  loggedinuser : any = null;\n  url: string;\n  useraccount : any = {\n     termsagreed: 'no'\n  } ;\n\n  kycstatus: kycStatus = {\n    kycdone: '',\n    kycid: '',          \n    googleid: '',          \n    email: '',          \n    statusaction: '',     \n    statusmsg: '',         \n\n  };\n\n\n  uploadProgress : any;\n   kycdata =  { \n   kycdone: \"false\", // submitted\n   name: \"\",\n   id: \"\",\n   kycid: \"\",\n   googleid: \"\",\n   message: \"\",\n   updatedate: \"\",\n   loginphone: \"\",\n   kycphone: \"\",\n   country: \"\",\n   kycemail: \"\",\n   loginemail: \"\",\n   address: \"\",\n   kycdoctype: \"\",\n   kycdocnumber: \"\",\n   kycdocument: \"\",\n   };\n\n\n   constructor(\n        public navCtrl: NavController,\n         public events: Events,\n        public logger: Logger,\n         public alertController: AlertController,\n        public termsuserservice: TermsuserService,\n        public storage: Storage,\n        public kycService: KycService,\n\t) {\n\n  this.loaduser() ;\n  this.loadkycdata() ;\n  this.getaccount() ;\n\n  }\n\nionViewWillEnter() {\n  this.loaduser() ;\n  this.loadkycdata() ;\n  this.getaccount() ;\n\n}\n\nngOnInit() {\n\n  this.loaduser() ;\n  this.loadkycdata() ;\n  this.getaccount() ;\n}\n  \nasync  getaccount() {\n   this.loggedinuser = await this.termsuserservice.getloggedinuser();\n\n\n    if(this.loggedinuser.uid == '') {\n     return;\n   }\n\n   var data = {\n     googleid: this.loggedinuser.uid,\n     };\n \n     this.termsuserservice.getaccount(data).then(data1=> {\n     this.logger.info(data1);\n     if(data1) {\n     this.useraccount = data1\n        this.storage.set(environment.storageuniq+'useraccount', JSON.stringify(this.useraccount) ).then(xx=>{\n       this.termsuserservice.reflectuseraccount();\n\n   });;\n\n      this.storage.set(environment.storageuniq+'token', \"WebKey \"+ this.useraccount.token);\n\n     }\n   } ,(err) => {\n      if(err._body) {\n    this.presentAlert(\"\", \"\", \"Agree terms of usage. \");\n    } else {\n    this.presentAlert(\"\", \"\", \"Error reading account. \");\n    }\n\n   });\n\n  \n  \n  }\n\n\n async loaduser() {\n  this.loggedinuser = await this.termsuserservice.getloggedinuser();\n}\n async loadkycdata() {\n\n   this.kycstatus = await this.kycService.getkycstatus();\n\n}\n\n\n  async getkycdata() {\n\n  this.loggedinuser = await this.termsuserservice.getloggedinuser();\n\n   if(!this.loggedinuser) {\n     return;\n   }\n\n   var data = {\n     email: this.loggedinuser.email,\n     googleid: this.loggedinuser.uid,\n   };\n\n   this.kycService.getkycdata(data).then((kycstatus: any) => {\n     if(kycstatus) {\n     this.storage.set(environment.storageuniq+'kycstatus', kycstatus).then(xx=>{\n       this.kycService.reflectkycstatus();\n\n       });;\n      }\n   });;\n\n\n  }\n\nasync  kycsubmit() {\n  this.loggedinuser = await this.termsuserservice.getloggedinuser();\n   this.useraccount = await this.termsuserservice.getuseraccount();\n\n   this.kycdata.googleid = this.loggedinuser.uid;\n   this.kycdata.loginemail = this.loggedinuser.email;\n   this.kycdata.loginphone = this.loggedinuser.phoneNumber;\n  \n   var data : kycData = this.kycdata;\n   if(!(this.useraccount && this.useraccount.kycid != ''))\n   {\n      this.logger.info(\"account not created\");\n      alert(\"account not created\");\n      return;\n   }\n\n   this.kycService.registeruserkyc(data).then((kycstatus: any) => {\n     if(kycstatus) {\n     this.storage.set(environment.storageuniq+'kycstatus', kycstatus).then(xx=>{\n       this.kycService.reflectkycstatus();\n     //   this.loadkycdata() ;\n\n       });;\n     }\n   });;\n\n  }\n\n  async presentAlert(title, subheader, message) {\n    const alert = await this.alertController.create({\n      header: title,\n      subHeader: subheader,\n      message: message,\n      buttons: ['OK']\n    });\n\n    await alert.present();\n    setTimeout( async ()=>{\n      await alert.dismiss();\n   }, environment.alertdelay);\n\n  }\n\n\n}\n","import { Injectable } from '@angular/core';\nimport { Http, Headers } from '@angular/http';\nimport { Storage } from '@ionic/storage';\nimport {of as observableOf} from 'rxjs';\nimport {map, tap} from 'rxjs/operators';\nimport {environment} from '../config/environment';\nimport {webtestnetissueconfig, weblivenetissueconfig} from '../config/webissueconfig';\nimport { kycStatus } from '../models/kycstatus.model';\n\n\n\n@Injectable({\n  providedIn: 'root'\n})\n\nexport class KycService {\n  public token: any;\n  url: string ;\n\n  sendingmessages= [];\n  sendtransactions= [];\n \n   kycstatus: kycStatus = {\n    kycdone: '',\n    kycid: '',\n    googleid: '',\n    email: '',\n    statusaction: '',\n    statusmsg: '',\n\n  };\n \n\n  constructor(public http: Http, public storage: Storage) {\n      this.url = environment.hosteddomain ;\n\n  }\n  async getkycstatus() {\n     var xx = await this.reflectkycstatus() ;\n\n     return this.kycstatus;\n\n  }\n\n\n  reflectkycstatus() {\n       return new Promise((resolve, reject) => {\n      this.storage.get(environment.storageuniq+'kycstatus').then((data)=> {\n        if(data) {\n        this.kycstatus = data;\n        }\n        resolve(0);\n      });\n\n      })\n\n  }\n\n  registeruserkyc (details: any) {\n\n\n\n        return new Promise((resolve, reject) => {\n\n              this.storage.get(environment.storageuniq+'token').then((value) => {\n\n             this.token = value;\n             let headers = new Headers();\n             headers.append('Authorization', this.token);\n             headers.append('Content-Type', 'application/json');\n\n\n\n\n            this.http.post(this.url + '/webkycuser/registeruserkyc', JSON.stringify(details), {headers: headers})\n              .subscribe(res => {\n\n                let data = res.json();\n                resolve(data);\n\n              }, (err) => {\n                reject(err);\n              });\n\n        });\n        });\n\n  }\n\n  getkycdata ( details: any) {\n\n\n        return new Promise((resolve, reject) => {\n\n              this.storage.get(environment.storageuniq+'token').then((value) => {\n\n             this.token = value;\n             let headers = new Headers();\n             headers.append('Authorization', this.token);\n             headers.append('Content-Type', 'application/json');\n\n\n\n\n            this.http.post(this.url + '/webkycuser/getuserkyc', JSON.stringify(details), {headers: headers})\n              .subscribe(res => {\n\n                let data = res.json();\n                resolve(data);\n\n              }, (err) => {\n                reject(err);\n              });\n\n        });\n        });\n\n  }\n\n\n \n}\n"],"sourceRoot":""}